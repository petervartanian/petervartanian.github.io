<!doctype html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
  <head>
    <meta charset="utf-8">
    <title>{% if page.title %}{{ page.title }} · {% endif %}{{ site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    {%- assign meta_title = page.title | default: site.title -%}
    {%- assign meta_description = page.excerpt | default: site.description -%}

    <meta name="description" content="{{ meta_description | strip_newlines | strip | escape }}">

    <!-- Open Graph for rich previews (iMessage, WhatsApp, etc.) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{{ meta_title }} · {{ site.title }}">
    <meta property="og:description" content="{{ meta_description | strip_newlines | strip | escape }}">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:image" content="{{ page.og_image | default: site.og_image | default: '/assets/img/card-default.png' | absolute_url }}">

    <!-- Twitter / X card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ meta_title }} · {{ site.title }}">
    <meta name="twitter:description" content="{{ meta_description | strip_newlines | strip | escape }}">
    <meta name="twitter:image" content="{{ page.og_image | default: site.og_image | default: '/assets/img/card-default.png' | absolute_url }}">

    <!-- iOS-style name -->
    <meta name="apple-mobile-web-app-title" content="{{ site.title }}">

    <!-- Favicon / icon (we'll add favicon.png under assets/img/) -->
    <link rel="icon" type="image/png" href="{{ '/assets/img/favicon.png' | relative_url }}">
    <link rel="apple-touch-icon" href="{{ '/assets/img/favicon.png' | relative_url }}">

    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  </head>
  <body class="{% assign p = page.permalink | default: page.url %}{% if p == '/' %}pv-about{% elsif p == '/projects' %}pv-projects{% elsif p == '/media' %}pv-media{% elsif p == '/cv' %}pv-cv{% elsif p == '/contact' %}pv-contact{% else %}pv-default{% endif %}">
    <div class="pv-page">
      <header class="pv-header">
        <div class="pv-header-inner">
          <a class="pv-brand" href="{{ '/' | relative_url }}">
            <span class="pv-brand-title">{{ site.title }}</span>
            <span class="pv-brand-tagline">{{ site.description }}</span>
          </a>
        </div>
      </header>

      <main class="pv-main" role="main">
        <aside class="pv-side-index">
          {% assign current = page.permalink | default: page.url %}
          <ul class="pv-side-list">
            {% for item in site.navigation %}
              <li>
                <a class="pv-side-link{% if item.url == current %} is-active{% endif %}"
                   href="{{ item.url | relative_url }}">
                  {{ item.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </aside>

        <article class="pv-article">
          {{ content }}
        </article>
      </main>

      <footer class="pv-footer">
        <div class="pv-footer-inner">
          <span>© {{ site.time | date: '%Y' }} {{ site.title }}</span>
        </div>
      </footer>
    </div>
  </body>
</html>
